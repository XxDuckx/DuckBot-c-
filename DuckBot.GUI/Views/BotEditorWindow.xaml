<Window x:Class="DuckBot.GUI.Views.BotEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Bot Editor" Height="640" Width="900"
        Background="#1e1e1e" Foreground="White"
        WindowStartupLocation="CenterOwner">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="Name" VerticalAlignment="Center"/>
            <TextBox Text="{Binding Bot.Name, UpdateSourceTrigger=PropertyChanged}"
                     Width="220" Background="#2b2b2b" Margin="8,0,0,0"/>
            <TextBlock Text="Game" Margin="16,0,0,0" VerticalAlignment="Center"/>
            <ComboBox Width="180" SelectedItem="{Binding Bot.Game}" Background="#2b2b2b" Margin="8,0,0,0">
                <ComboBoxItem Content="West Game"/>
                <ComboBoxItem Content="State of Survival"/>
            </ComboBox>
        </StackPanel>

        <!-- Tabbed editor -->
        <TabControl Grid.Row="1" Background="#1e1e1e" BorderThickness="0">
            <!-- Scripts tab -->
            <TabItem Header="Scripts">
                <Grid Margin="8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="3*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Script list -->
                    <ListView x:Name="ScriptsList"
                              ItemsSource="{Binding Bot.Scripts}"
                              SelectionMode="Single"
                              Background="#252525">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <CheckBox IsChecked="{Binding Enabled}" Margin="0,0,6,0"/>
                                    <TextBox Text="{Binding Name}" Width="200" Background="#2b2b2b" Margin="0,0,6,0"/>
                                    <Button Content="Vars" Width="60" Click="EditVars_Click"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                    <!-- Template side controls -->
                    <StackPanel Grid.Column="1" Margin="12,0,0,0">
                        <TextBlock Text="Templates" FontWeight="Bold" Margin="0,0,0,6"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                            <Button Content="Add Script" Width="110" Margin="0,0,6,0" Click="AddScript_Click"/>
                            <Button Content="Remove Selected" Width="140" Click="RemoveScript_Click"/>
                        </StackPanel>
                        <TextBlock Margin="0,12,0,0"
                                   Text="(Future: per-script UI like your LSSBot settings)"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- Emulators / Accounts tab -->
            <TabItem Header="Emulators / Accounts">
                <Grid Margin="8">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="Accounts (per bot, rotates if enabled later)" Margin="0,0,0,6"/>
                    <DataGrid Grid.Row="1"
                              ItemsSource="{Binding Bot.Accounts}"
                              AutoGenerateColumns="False"
                              Background="#252525"
                              Foreground="White">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Username" Binding="{Binding Username}"/>
                            <DataGridTextColumn Header="Email" Binding="{Binding Email}"/>
                            <DataGridTextColumn Header="PIN" Binding="{Binding Pin}"/>
                            <DataGridCheckBoxColumn Header="Active" Binding="{Binding Active}"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Other settings -->
            <TabItem Header="Other Settings">
                <StackPanel Margin="8">
                    <CheckBox Content="Ignore cooldowns"
                              IsChecked="{Binding Bot.Settings.IgnoreCooldowns}"
                              Margin="0,0,0,6"/>
                    <CheckBox Content="Stop instance after full loop"
                              IsChecked="{Binding Bot.Settings.StopInstanceAfterLoop}"/>
                </StackPanel>
            </TabItem>

            <!-- Mail Login -->
            <TabItem Header="Mail Login">
                <TextBlock Margin="8" Text="(Stub — add mail account table later)"/>
            </TabItem>
        </TabControl>

        <!-- Bottom buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal"
                    HorizontalAlignment="Right" Margin="0,8,0,0">
            <Button Content="Save" Width="100" Margin="0,0,8,0" Click="Save_Click"/>
            <Button Content="Cancel" Width="100" Click="Cancel_Click"/>
        </StackPanel>
    </Grid>
</Window>
